<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProductivityHub - Your All-in-One Life Management System</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

    // Icon components
    const Icons = {
      Calendar: () => <svg className="lucide lucide-calendar" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
      CheckSquare: () => <svg className="lucide lucide-check-square" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>,
      Dumbbell: () => <svg className="lucide lucide-dumbbell" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m6.5 6.5 11 11"/><path d="m21 21-1-1"/><path d="m3 3 1 1"/><path d="m18 22 4-4"/><path d="m2 6 4-4"/><path d="m3 10 7-7"/><path d="m14 21 7-7"/></svg>,
      Target: () => <svg className="lucide lucide-target" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
      Clock: () => <svg className="lucide lucide-clock" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Plus: () => <svg className="lucide lucide-plus" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
      X: () => <svg className="lucide lucide-x" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
      Play: () => <svg className="lucide lucide-play" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
      Pause: () => <svg className="lucide lucide-pause" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="4" height="16" x="6" y="4"/><rect width="4" height="16" x="14" y="4"/></svg>,
      RotateCcw: () => <svg className="lucide lucide-rotate-ccw" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>,
      TrendingUp: () => <svg className="lucide lucide-trending-up" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
      ListTodo: () => <svg className="lucide lucide-list-todo" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="5" width="6" height="6" rx="1"/><path d="m3 17 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></svg>,
      Zap: () => <svg className="lucide lucide-zap" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      Edit2: () => <svg className="lucide lucide-edit-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/></svg>,
      Trash2: () => <svg className="lucide lucide-trash-2" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
      Save: () => <svg className="lucide lucide-save" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
      BarChart3: () => <svg className="lucide lucide-bar-chart-3" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>
    };

    function ProductivityApp() {
      const [activeTab, setActiveTab] = useState('habits');
      const [editingHabit, setEditingHabit] = useState(null);
      const [editingTodo, setEditingTodo] = useState(null);
      const [editingProject, setEditingProject] = useState(null);
      const [chartView, setChartView] = useState('week');
     
      const [habits, setHabits] = useState([
        {
          id: 1,
          name: '10,000 Steps',
          entries: [
            { date: '2024-11-12', completed: true },
            { date: '2024-11-13', completed: true },
            { date: '2024-11-14', completed: true },
            { date: '2024-11-15', completed: false },
            { date: '2024-11-16', completed: true },
            { date: '2024-11-17', completed: true },
            { date: '2024-11-18', completed: true },
          ]
        },
        {
          id: 2,
          name: 'Track Weight',
          entries: [
            { date: '2024-11-12', completed: true },
            { date: '2024-11-13', completed: true },
            { date: '2024-11-14', completed: false },
            { date: '2024-11-15', completed: true },
            { date: '2024-11-16', completed: true },
            { date: '2024-11-17', completed: true },
            { date: '2024-11-18', completed: true },
          ]
        },
      ]);
     
      const [weight, setWeight] = useState([
        { date: '2024-11-12', value: 80.0 },
        { date: '2024-11-13', value: 79.8 },
        { date: '2024-11-14', value: 79.6 },
        { date: '2024-11-15', value: 79.3 },
        { date: '2024-11-16', value: 79.0 },
        { date: '2024-11-17', value: 78.8 },
        { date: '2024-11-18', value: 78.6 },
      ]);
     
      const [todos, setTodos] = useState([
        { id: 1, text: 'Complete 5 practice problems', time: '50 min', completed: false },
        { id: 2, text: 'Meal prep 3 high-protein lunches', time: '45 min', completed: true },
        { id: 3, text: 'Calculate daily calorie targets', time: '20 min', completed: true },
      ]);
     
      const [projects, setProjects] = useState([
        { id: 1, name: 'Fitness Challenge', tasks: 15, completed: 8, color: 'bg-blue-600' },
        { id: 2, name: 'Learning Journey', tasks: 20, completed: 12, color: 'bg-indigo-600' },
        { id: 3, name: 'Side Project', tasks: 10, completed: 3, color: 'bg-cyan-600' },
      ]);
     
      const [timers, setTimers] = useState([
        { id: 1, name: 'Movement Break', duration: 3600, remaining: 3600, active: false, type: 'reminder' },
        { id: 2, name: 'Deep Work Session', duration: 1500, remaining: 1500, active: false, type: 'focus' },
        { id: 3, name: 'Task Switch', duration: 1800, remaining: 1800, active: false, type: 'switch' },
      ]);
     
      const [newTodo, setNewTodo] = useState('');
      const [newHabit, setNewHabit] = useState('');
      const [aiGoal, setAiGoal] = useState('');
      const [aiTasks, setAiTasks] = useState([]);

      // Load from localStorage
      useEffect(() => {
        const saved = localStorage.getItem('productivityData');
        if (saved) {
          try {
            const data = JSON.parse(saved);
            if (data.habits) setHabits(data.habits);
            if (data.weight) setWeight(data.weight);
            if (data.todos) setTodos(data.todos);
            if (data.projects) setProjects(data.projects);
          } catch (e) {
            console.error('Error loading data:', e);
          }
        }
      }, []);

      // Save to localStorage
      useEffect(() => {
        localStorage.setItem('productivityData', JSON.stringify({
          habits,
          weight,
          todos,
          projects
        }));
      }, [habits, weight, todos, projects]);

      useEffect(() => {
        const interval = setInterval(() => {
          setTimers(prev => prev.map(timer => {
            if (timer.active && timer.remaining > 0) {
              return { ...timer, remaining: timer.remaining - 1 };
            }
            if (timer.active && timer.remaining === 0) {
              return { ...timer, active: false };
            }
            return timer;
          }));
        }, 1000);
        return () => clearInterval(interval);
      }, []);

      const formatDate = (date) => {
        const d = new Date(date);
        return `${d.getMonth() + 1}/${d.getDate()}`;
      };

      const getLast7Days = () => {
        const days = [];
        for (let i = 6; i >= 0; i--) {
          const d = new Date();
          d.setDate(d.getDate() - i);
          days.push(d.toISOString().split('T')[0]);
        }
        return days;
      };

      const getLast30Days = () => {
        const days = [];
        for (let i = 29; i >= 0; i--) {
          const d = new Date();
          d.setDate(d.getDate() - i);
          days.push(d.toISOString().split('T')[0]);
        }
        return days;
      };

      const getHabitChartData = () => {
        const dates = chartView === 'month' ? getLast30Days() : getLast7Days();
        return dates.map(date => {
          const dataPoint = { date: formatDate(date) };
          habits.forEach(habit => {
            const entry = habit.entries.find(e => e.date === date);
            dataPoint[habit.name] = entry && entry.completed ? 1 : 0;
          });
          return dataPoint;
        });
      };

      const getWeightChartData = () => {
        const dates = chartView === 'month' ? getLast30Days() : getLast7Days();
        return dates.map(date => {
          const entry = weight.find(w => w.date === date);
          return {
            date: formatDate(date),
            weight: entry ? entry.value : null
          };
        }).filter(d => d.weight !== null);
      };

      const toggleHabitForDate = (habitId, date) => {
        setHabits(prev => prev.map(h => {
          if (h.id === habitId) {
            const existingEntry = h.entries.find(e => e.date === date);
            if (existingEntry) {
              return {
                ...h,
                entries: h.entries.map(e =>
                  e.date === date ? { ...e, completed: !e.completed } : e
                )
              };
            } else {
              return {
                ...h,
                entries: [...h.entries, { date, completed: true }]
              };
            }
          }
          return h;
        }));
      };

      const addTodo = () => {
        if (newTodo.trim()) {
          setTodos(prev => [...prev, { id: Date.now(), text: newTodo, time: '30 min', completed: false }]);
          setNewTodo('');
        }
      };

      const updateTodo = (id, updates) => {
        setTodos(prev => prev.map(t => t.id === id ? { ...t, ...updates } : t));
      };

      const deleteTodo = (id) => {
        setTodos(prev => prev.filter(t => t.id !== id));
      };

      const toggleTodo = (id) => {
        setTodos(prev => prev.map(t => t.id === id ? { ...t, completed: !t.completed } : t));
      };

      const addHabit = () => {
        if (newHabit.trim()) {
          setHabits(prev => [...prev, { id: Date.now(), name: newHabit, entries: [] }]);
          setNewHabit('');
        }
      };

      const updateHabit = (id, newName) => {
        setHabits(prev => prev.map(h => h.id === id ? { ...h, name: newName } : h));
        setEditingHabit(null);
      };

      const deleteHabit = (id) => {
        setHabits(prev => prev.filter(h => h.id !== id));
      };

      const updateProject = (id, updates) => {
        setProjects(prev => prev.map(p => p.id === id ? { ...p, ...updates } : p));
      };

      const deleteProject = (id) => {
        setProjects(prev => prev.filter(p => p.id !== id));
      };

      const addWeightEntry = (value) => {
        const today = new Date().toISOString().split('T')[0];
        const existing = weight.find(w => w.date === today);
        if (existing) {
          setWeight(prev => prev.map(w => w.date === today ? { ...w, value: parseFloat(value) } : w));
        } else {
          setWeight(prev => [...prev, { date: today, value: parseFloat(value) }]);
        }
      };

      const toggleTimer = (id) => {
        setTimers(prev => prev.map(t => t.id === id ? { ...t, active: !t.active } : t));
      };

      const resetTimer = (id) => {
        setTimers(prev => prev.map(t => t.id === id ? { ...t, remaining: t.duration, active: false } : t));
      };

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      const generateAiTasks = () => {
        const taskSuggestions = [
          `Research best practices for ${aiGoal}`,
          `Create a detailed plan with milestones`,
          `Set up daily tracking system`,
          `Identify resources and tools needed`,
          `Schedule dedicated time blocks`,
          `Find accountability partner or community`,
        ];
        setAiTasks(taskSuggestions.slice(0, 4));
      };

      const last7Days = getLast7Days();

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950 p-4">
          <div className="max-w-7xl mx-auto">
            <div className="bg-gradient-to-r from-blue-900/40 to-indigo-900/40 backdrop-blur-xl rounded-2xl shadow-2xl p-6 mb-6 border border-blue-800/30">
              <h1 className="text-4xl font-bold text-white mb-2 flex items-center gap-3">
                <Icons.Zap />
                ProductivityHub
              </h1>
              <p className="text-blue-200">Your all-in-one life management system</p>
            </div>

            <div className="flex gap-2 mb-6 overflow-x-auto pb-2">
              {[
                { id: 'habits', icon: 'CheckSquare', label: 'Habits' },
                { id: 'fitness', icon: 'Dumbbell', label: 'Fitness' },
                { id: 'todos', icon: 'ListTodo', label: 'To-Dos' },
                { id: 'projects', icon: 'Target', label: 'Projects' },
                { id: 'timers', icon: 'Clock', label: 'Timers' },
                { id: 'ai', icon: 'Zap', label: 'AI Goals' },
              ].map(tab => {
                const Icon = Icons[tab.icon];
                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={`flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all ${
                      activeTab === tab.id
                        ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg scale-105'
                        : 'bg-blue-900/30 text-blue-200 hover:bg-blue-900/50 border border-blue-800/30'
                    }`}
                  >
                    <Icon />
                    {tab.label}
                  </button>
                );
              })}
            </div>

            <div className="bg-gradient-to-br from-blue-900/40 to-indigo-900/40 backdrop-blur-xl rounded-2xl shadow-2xl p-6 text-white border border-blue-800/30">
              {activeTab === 'habits' && (
                <div>
                  <div className="flex justify-between items-center mb-6">
                    <h2 className="text-2xl font-bold">Daily Habit Tracker</h2>
                    <div className="flex gap-2">
                      <input
                        type="text"
                        value={newHabit}
                        onChange={(e) => setNewHabit(e.target.value)}
                        placeholder="New habit..."
                        className="px-4 py-2 rounded-lg bg-blue-950/50 border border-blue-700/50 text-white placeholder-blue-300"
                        onKeyPress={(e) => e.key === 'Enter' && addHabit()}
                      />
                      <button onClick={addHabit} className="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg flex items-center gap-2">
                        <Icons.Plus /> Add
                      </button>
                    </div>
                  </div>

                  <div className="flex gap-2 mb-4">
                    <button
                      onClick={() => setChartView('week')}
                      className={`px-4 py-2 rounded-lg ${chartView === 'week' ? 'bg-blue-600' : 'bg-blue-900/50'}`}
                    >
                      Last 7 Days
                    </button>
                    <button
                      onClick={() => setChartView('month')}
                      className={`px-4 py-2 rounded-lg ${chartView === 'month' ? 'bg-blue-600' : 'bg-blue-900/50'}`}
                    >
                      Last 30 Days
                    </button>
                  </div>

                  <div className="bg-blue-950/50 rounded-xl p-4 mb-6 border border-blue-800/30">
                    <h3 className="text-xl font-semibold mb-4 flex items-center gap-2">
                      <Icons.BarChart3 /> Habit Completion Trends
                    </h3>
                    <ResponsiveContainer width="100%" height={300}>
                      <BarChart data={getHabitChartData()}>
                        <CartesianGrid strokeDasharray="3 3" stroke="#1e3a8a" />
                        <XAxis dataKey="date" stroke="#93c5fd" />
                        <YAxis stroke="#93c5fd" />
                        <Tooltip
                          contentStyle={{ backgroundColor: '#1e3a8a', border: '1px solid #3b82f6' }}
                          labelStyle={{ color: '#fff' }}
                        />
                        <Legend />
                        {habits.map((habit, idx) => (
                          <Bar
                            key={habit.id}
                            dataKey={habit.name}
                            fill={['#3b82f6', '#6366f1', '#06b6d4', '#8b5cf6'][idx % 4]}
                          />
                        ))}
                      </BarChart>
                    </ResponsiveContainer>
                  </div>

                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="border-b border-blue-700/50">
                          <th className="text-left py-3 px-4">Habit</th>
                          {last7Days.map((date, i) => (
                            <th key={i} className="text-center py-3 px-2">
                              {formatDate(date)}
                            </th>
                          ))}
                          <th className="text-center py-3 px-4">Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        {habits.map(habit => (
                          <tr key={habit.id} className="border-b border-blue-800/30 hover:bg-blue-900/30">
                            <td className="py-3 px-4">
                              {editingHabit === habit.id ? (
                                <div className="flex gap-2">
                                  <input
                                    type="text"
                                    defaultValue={habit.name}
                                    className="px-2 py-1 rounded bg-blue-950/50 border border-blue-700/50"
                                    onKeyPress={(e) => {
                                      if (e.key === 'Enter') {
                                        updateHabit(habit.id, e.target.value);
                                      }
                                    }}
                                  />
                                  <button
                                    onClick={() => setEditingHabit(null)}
                                    className="text-blue-400 hover:text-blue-300"
                                  >
                                    <Icons.Save />
                                  </button>
                                </div>
                              ) : (
                                <span className="font-semibold">{habit.name}</span>
                              )}
                            </td>
                            {last7Days.map((date, idx) => {
                              const entry = habit.entries.find(e => e.date === date);
                              const completed = entry && entry.completed;
                              return (
                                <td key={idx} className="text-center py-3 px-2">
                                  <button
                                    onClick={() => toggleHabitForDate(habit.id, date)}
                                    className={`w-8 h-8 rounded-lg transition-all ${
                                      completed ? 'bg-blue-500 shadow-lg' : 'bg-blue-900/50 border border-blue-700/50'
                                    }`}
                                  >
                                    {completed && <Icons.CheckSquare />}
                                  </button>
                                </td>
                              );
                            })}
                            <td className="text-center py-3 px-4">
                              <div className="flex gap-2 justify-center">
                                <button
                                  onClick={() => setEditingHabit(habit.id)}
                                  className="text-blue-400 hover:text-blue-300"
                                >
                                  <Icons.Edit2 />
                                </button>
                                <button
                                  onClick={() => deleteHabit(habit.id)}
                                  className="text-red-400 hover:text-red-300"
                                >
                                  <Icons.Trash2 />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}

              {activeTab === 'fitness' && (
                <div>
                  <h2 className="text-2xl font-bold mb-6">Fitness Tracking</h2>

                  <div className="flex gap-2 mb-4">
                    <button
                      onClick={() => setChartView('week')}
                      className={`px-4 py-2 rounded-lg ${chartView === 'week' ? 'bg-blue-600' : 'bg-blue-900/50'}`}
                    >
                      Last 7 Days
                    </button>
                    <button
                      onClick={() => setChartView('month')}
                      className={`px-4 py-2 rounded-lg ${chartView === 'month' ? 'bg-blue-600' : 'bg-blue-900/50'}`}
                    >
                      Last 30 Days
                    </button>
                  </div>

                  <div className="bg-blue-950/50 rounded-xl p-4 mb-6 border border-blue-800/30">
                    <h3 className="text-xl font-semibold mb-4 flex items-center gap-2">
                      <Icons.TrendingUp /> Weight Progression
                    </h3>
                    <ResponsiveContainer width="100%" height={300}>
                      <LineChart data={getWeightChartData()}>
                        <CartesianGrid strokeDasharray="3 3" stroke="#1e3a8a" />
                        <XAxis dataKey="date" stroke="#93c5fd" />
                        <YAxis stroke="#93c5fd" domain={['dataMin - 1', 'dataMax + 1']} />
                        <Tooltip
                          contentStyle={{ backgroundColor: '#1e3a8a', border: '1px solid #3b82f6' }}
                          labelStyle={{ color: '#fff' }}
                        />
                        <Legend />
                        <Line
                          type="monotone"
                          dataKey="weight"
                          stroke="#3b82f6"
                          strokeWidth={3}
                          dot={{ fill: '#3b82f6', r: 6 }}
                        />
                      </LineChart>
                    </ResponsiveContainer>
                  </div>

                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="bg-blue-950/50 rounde
